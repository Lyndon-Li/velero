
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.7.0
  creationTimestamp: null
  name: snapshotbackups.velero.io
spec:
  group: velero.io
  names:
    kind: SnapshotBackup
    listKind: SnapshotBackupList
    plural: snapshotbackups
    singular: snapshotbackup
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - description: Snapshot Backup status such as New/InProgress
      jsonPath: .status.phase
      name: Status
      type: string
    - description: Time when this backup was started
      jsonPath: .status.startTimestamp
      name: Created
      type: date
    - description: Name of the volume to be backed up
      jsonPath: .spec.volume
      name: Volume
      type: string
    - description: Backup repository identifier for this backup
      jsonPath: .spec.repoIdentifier
      name: Repository ID
      type: string
    - description: The type of the uploader to handle data transfer
      jsonPath: .spec.uploaderType
      name: Uploader Type
      type: string
    - description: Name of the Backup Storage Location where this backup should be
        stored
      jsonPath: .spec.backupStorageLocation
      name: Storage Location
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1
    schema:
      openAPIV3Schema:
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: SnapshotBackupSpec is the specification for a SnapshotBackup.
            properties:
              backupName:
                description: BackupName is the name of the backup which owns this
                  snapshot backup.
                type: string
              backupStorageLocation:
                description: BackupStorageLocation is the name of the backup storage
                  location where the backup repository is stored.
                type: string
              cancel:
                description: Cancel indicates request to cancel the ongoing snapshot
                  backup. It can be set when the snapshot backup is in InProgress
                  phase
                type: boolean
              csiSnapshot:
                description: If SnapshotType is CSI, CSISnapshot provides the information
                  of the CSI snapshot.
                nullable: true
                properties:
                  csiSnapshotTimeout:
                    description: CSISnapshotTimeout specifies the time used to wait
                      for CSI VolumeSnapshot status turns to ReadyToUse during creation,
                      before returning error as timeout.
                    type: string
                  storageClass:
                    description: StorageClass is the name of the storage class of
                      the PVC that the volume snapshot is created from
                    type: string
                  volumeSnapshot:
                    description: VolumeSnapshot is the name of the volume snapshot
                      to be backed up
                    type: string
                required:
                - csiSnapshotTimeout
                - storageClass
                - volumeSnapshot
                type: object
              dataMoverConfig:
                additionalProperties:
                  type: string
                description: DataMoverConfig is for data-mover-specific configuration
                  fields.
                type: object
              datamover:
                description: DataMover specifies the data mover to be used by the
                  backup. If DataMover is "" or "velero", the built-in data mover
                  will be used.
                type: string
              snapshotType:
                description: SnapshotType is the type of the snapshot to be backed
                  up.
                type: string
              sourceNamespace:
                description: SourceNamespace is the original namespace where the volume
                  is backed up from. It is the same namespace for SourcePVC and CSI
                  namespaced objects.
                type: string
              sourcePVC:
                description: SourcePVC is the name of the PVC which the snapshot is
                  taken for.
                type: string
              tags:
                additionalProperties:
                  type: string
                description: Tags are a map of key-value pairs that should be applied
                  to the snapshot backup as tags.
                type: object
            required:
            - backupName
            - backupStorageLocation
            - snapshotType
            - sourceNamespace
            - sourcePVC
            type: object
          status:
            description: SnapshotBackupStatus is the current status of a SnapshotBackup.
            properties:
              completionTimestamp:
                description: CompletionTimestamp records the time a backup was completed.
                  Completion time is recorded even on failed backups. Completion time
                  is recorded before uploading the backup object. The server's time
                  is used for CompletionTimestamps
                format: date-time
                nullable: true
                type: string
              message:
                description: Message is a message about the snapshot backup's status.
                type: string
              path:
                description: Path is the full path of the snapshot volume being backed
                  up.
                type: string
              phase:
                description: Phase is the current state of the SnapshotBackup.
                enum:
                - New
                - Accepted
                - Prepared
                - InProgress
                - Canceling
                - Canceled
                - Completed
                - Failed
                type: string
              progress:
                description: Progress holds the total number of bytes of the volume
                  and the current number of backed up bytes. This can be used to display
                  progress information about the backup operation.
                properties:
                  bytesDone:
                    format: int64
                    type: integer
                  totalBytes:
                    format: int64
                    type: integer
                type: object
              snapshotID:
                description: SnapshotID is the identifier for the snapshot in the
                  backup repository.
                type: string
              startTimestamp:
                description: StartTimestamp records the time a backup was started.
                  Separate from CreationTimestamp, since that value changes on restores.
                  The server's time is used for StartTimestamps
                format: date-time
                nullable: true
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
